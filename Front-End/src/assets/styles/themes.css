/* Three distinct themes only: default, glass, contrast */

/* Default White — relies on :root variables from index.css */
html[data-theme="default"] {
  --radius: 0.75rem;
}

/* Particles — dark tokens to complement particle background */
html[data-theme="particles"] {
  --background: oklch(0.10 0 0); /* pure black for uniform backdrop */
  --foreground: oklch(0.98 0 0);

  --card: oklch(0.16 0 0 / 0.92);
  --card-foreground: var(--foreground);

  --popover: oklch(0.14 0 0 / 0.92);
  --popover-foreground: var(--foreground);

  --border: oklch(1 0 0 / 16%);
  --input: var(--border);
  --muted: oklch(0.18 0 0 / 0.9);
  --muted-foreground: oklch(0.86 0 0);

  --accent: oklch(0.72 0.16 200);
  --accent-foreground: oklch(0.12 0 0);

  --primary: oklch(0.76 0.12 210);
  --primary-foreground: oklch(0.12 0 0);

  --secondary: oklch(0.18 0 0 / 0.92);
  --secondary-foreground: var(--foreground);

  --ring: oklch(0.76 0.12 210);
  --radius: 0.75rem;
}

html[data-theme="particles"] .navbar-container {
  backdrop-filter: saturate(120%) blur(8px);
  background-color: color-mix(in oklab, black 70%, transparent);
  border-color: oklch(1 0 0 / 16%);
}

html[data-theme="particles"] .card-shadow {
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
  border-color: oklch(1 0 0 / 16%);
}

/* Force common Tailwind light classes to dark equivalents for particles theme */
html[data-theme="particles"] .bg-white,
html[data-theme="particles"] .bg-gray-50,
html[data-theme="particles"] .bg-gray-100 {
  background-color: oklch(0.10 0 0) !important; /* pure black-ish */
  color: var(--foreground) !important;
  border-color: var(--border) !important;
}

html[data-theme="particles"] .text-gray-800,
html[data-theme="particles"] .text-gray-700,
html[data-theme="particles"] .text-gray-600,
html[data-theme="particles"] .text-gray-500,
html[data-theme="particles"] .text-gray-400 {
  color: var(--foreground) !important;
}

html[data-theme="particles"] .hover\:bg-gray-50:hover,
html[data-theme="particles"] .hover\:bg-gray-100:hover {
  background-color: oklch(0.14 0 0) !important; /* slightly lighter black */
}

html[data-theme="particles"] .border-gray-200 { border-color: var(--border) !important; }
html[data-theme="particles"] .text-gray-700 { color: var(--foreground) !important; }
html[data-theme="particles"] .text-gray-500 { color: oklch(0.86 0 0) !important; }

/* High Contrast — dark, bold accents, stronger borders, minimal shadow */
html[data-theme="contrast"] {
  --background: oklch(0.13 0 0);
  --foreground: oklch(0.95 0 0);

  --card: oklch(0.18 0 0);
  --card-foreground: var(--foreground);

  --popover: oklch(0.16 0 0);
  --popover-foreground: var(--foreground);

  --border: oklch(0.3 0 0);
  --input: var(--border);
  --muted: oklch(0.22 0 0);
  --muted-foreground: oklch(0.72 0 0);

  --accent: oklch(0.22 0 0);
  --accent-foreground: var(--foreground);

  --primary: oklch(0.68 0.18 165);
  --primary-foreground: oklch(0.12 0 0);

  --secondary: oklch(0.22 0 0);
  --secondary-foreground: var(--foreground);

  --ring: oklch(0.68 0.18 165);
  --radius: 0.5rem;
}

html[data-theme="contrast"] .navbar-container {
  background-color: oklch(0.15 0 0) !important;
  border-color: oklch(0.3 0 0) !important;
}

html[data-theme="contrast"] .card-shadow {
  box-shadow: none;
  border-width: 2px;
  border-color: oklch(0.3 0 0);
}

/* PixelBlast — ivory background with readable dark text */
html[data-theme="pixelblast"] {
  --background: #FFFFF0; /* ivory */
  --foreground: oklch(0.18 0 0); /* very dark for contrast */

  --card: oklch(0.98 0 0); /* near-white card */
  --card-foreground: var(--foreground);

  --popover: oklch(0.98 0 0);
  --popover-foreground: var(--foreground);

  --border: oklch(0.85 0 0);
  --input: var(--border);
  --muted: oklch(0.96 0 0);
  --muted-foreground: oklch(0.42 0 0);

  --accent: #B19EEF; /* requested accent */
  --accent-foreground: var(--foreground);

  --primary: #6D5BD0;
  --primary-foreground: #ffffff;

  --secondary: oklch(0.96 0 0);
  --secondary-foreground: var(--foreground);

  --ring: var(--primary);
  --radius: 0.75rem;
}

html[data-theme="pixelblast"] .navbar-container {
  background-color: rgba(255, 255, 240, 0.85); /* ivory with slight translucency */
  backdrop-filter: saturate(120%) blur(6px);
  border-color: var(--border);
}

html[data-theme="pixelblast"] .card-shadow {
  box-shadow: 0 8px 24px rgba(0,0,0,0.08);
  border-color: var(--border);
}

/* Retro Grid — warm ivory-orange background with white grid lines */
html[data-theme="retro"] {
  /* Neon gradient background similar to reference */
  --background: transparent; /* use gradient on element */
  --foreground: oklch(0.98 0 0);

  --card: rgba(30, 58, 138, 0.45); /* match navbar translucent navy */
  --card-foreground: #ffffff;

  --popover: rgba(30, 58, 138, 0.45);
  --popover-foreground: #ffffff;

  --border: oklch(0.85 0 0);
  --input: var(--border);
  --muted: oklch(0.96 0 0);
  --muted-foreground: oklch(0.42 0 0);

  --accent: #ffffff;
  --accent-foreground: oklch(0.2 0 0);

  --primary: #ffffff; /* white grid/lines */
  --primary-foreground: #000000;

  --secondary: oklch(0.96 0 0);
  --secondary-foreground: oklch(0.2 0 0);

  --ring: var(--primary);
  --radius: 0.75rem;
}

/* Ensure the neon gradient applies to the page background */
html[data-theme="retro"],
html[data-theme="retro"] body,
html[data-theme="retro"] .bg-background {
  background-image: linear-gradient(to bottom, #431b93, #1e3a8a 40%, #1f2a6b) !important;
  background-attachment: fixed !important;
  background-size: 100% 100% !important;
  background-color: transparent !important;
}

html[data-theme="retro"] .navbar-container {
  background-color: #505e9f;
  backdrop-filter: saturate(140%) blur(8px);
  border-color: oklch(1 0 0 / 15%);
  color: #ffffff !important;
}

html[data-theme="retro"] .card-shadow {
  background-color: #505e9f !important;
  backdrop-filter: saturate(140%) blur(8px) !important;
  box-shadow: 0 8px 24px rgba(0,0,0,0.08);
  border-color: oklch(1 0 0 / 15%) !important;
  color: #ffffff !important;
}

/* Force all bg-card elements to use #505e9f in retro theme */
html[data-theme="retro"] .bg-card {
  background-color: #505e9f !important;
  color: #ffffff !important;
}

/* Force common light container backgrounds to #505e9f in retro theme */
html[data-theme="retro"] .bg-white,
html[data-theme="retro"] .bg-gray-50,
html[data-theme="retro"] .bg-gray-100 {
  background-color: #505e9f !important;
  color: #ffffff !important;
  border-color: oklch(1 0 0 / 15%) !important;
}

html[data-theme="retro"] .text-gray-800,
html[data-theme="retro"] .text-gray-700,
html[data-theme="retro"] .text-gray-600 {
  color: #ffffff !important;
}

/* Footer styling over neon gradient */
html[data-theme="retro"] footer {
  background-color: #505e9f !important;
  color: #ffffff !important;
  backdrop-filter: saturate(140%) blur(8px) !important;
  border-top-color: oklch(1 0 0 / 15%) !important;
}

html[data-theme="retro"] footer * {
  color: #ffffff !important;
}

/* In case footer uses a container class instead of semantic tag */
html[data-theme="retro"] .footer-container {
  background-color: #505e9f !important;
  color: #ffffff !important;
  backdrop-filter: saturate(140%) blur(8px) !important;
  border-top: 1px solid oklch(1 0 0 / 15%) !important;
}

html[data-theme="retro"] .footer-container * {
  color: #ffffff !important;
}

/* Retro theme component-specific fixes */
/* Popups and modals: learning type modal, navbar profile dropdown */
html[data-theme="retro"] .modal,
html[data-theme="retro"] .popover,
html[data-theme="retro"] .dropdown-menu,
html[data-theme="retro"] .navbar-profile-container .dropdown {
  background-color: #505e9f !important;
  color: #ffffff !important;
  border-color: oklch(1 0 0 / 15%) !important;
  backdrop-filter: saturate(140%) blur(8px) !important;
}
html[data-theme="retro"] .modal *,
html[data-theme="retro"] .popover *,
html[data-theme="retro"] .dropdown-menu * {
  color: #ffffff !important;
}

/* Courses card: ensure "View All" link and text are readable */
html[data-theme="retro"] .courses-card a,
html[data-theme="retro"] .courses-card .view-all,
html[data-theme="retro"] .courses-card .text-muted {
  color: #ffffff !important;
}

/* Leaderboard: XP points and "View All" link */
html[data-theme="retro"] .leaderboard-card .xp,
html[data-theme="retro"] .leaderboard-card .view-all,
html[data-theme="retro"] .leaderboard-card .text-muted {
  color: #ffffff !important;
}

/* Average Submission: score number and "Tap to detail" link */
html[data-theme="retro"] .submission-card .score,
html[data-theme="retro"] .submission-card .tap-to-detail,
html[data-theme="retro"] .submission-card .text-muted {
  color: #ffffff !important;
}

/* Generic fix: force common gray utility text to white for readability */
html[data-theme="retro"] .text-gray-400,
html[data-theme="retro"] .text-gray-500,
html[data-theme="retro"] .text-gray-600,
html[data-theme="retro"] .text-gray-700,
html[data-theme="retro"] .text-gray-800 {
  color: #ffffff !important;
}
